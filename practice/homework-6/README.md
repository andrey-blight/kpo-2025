# Сервис для обработки заказов

Сервис состоит из двух микросервисов

1) Payment сервис:

   Доступны следующие методы:

    1) Создание аккаунта. Он создастся только один раз и выбросит 400 при попытке создать второй раз
    2) Просмотр аккаунта по id с балансом (вернет 404 если не существует юзера)
    3) Пополнение баланса (вернет 404 если не существует юзера)

   Реализована exactly once семантика списания денег за транзакцию. Записываются логи в таблицу inbox. Обратно в очередь
   отбивается статус по заказу (успешно или нет)

2) Order сервис:

   Доступны следующие методы:

    1) Создать заказ
    2) Получить список всех заказов пользователя
    3) Посмотреть конкретный заказ

   При создании заказа ему ставится статус PROCESSED и в очередь улетает сообщение о проведении заказа на сумму amount.
   Так-же в outbox записывается сообщение о заказа. После получения статуса обработки заказу присваивается статус
   SUCCEED FAILED.

Для каждого сервиса хранится swagger по адресу:

1) Payment: http://localhost:8080/swagger-ui.html
2) Order: http://localhost:8081/swagger-ui.html

## Архитектура

1) В каждом сервисе есть свой build.gradle, так что сервисы это полноценные модули.
2) База данных поднята в docker-compose
3) В пакете controller содержатся ручки сервиса
4) В пакете entity содержится описание сущностей базы данных
5) В пакете repository хранится репозиторий для взаимодействия с базой данных
6) В пакете Service хранится сервис для реализации бизнес логики
7) В пакете dto содержатся json формы requests

Запуск происходит путем команды docker-compose up.
